<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ìš°ë¬´ì‚¬ë¦¬ ê°ì • ìœ„ë¡œ</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #fefae0;
      text-align: center;
      padding: 2rem;
    }
    #status {
      margin: 1.5rem 0;
      font-size: 1.2rem;
      font-weight: bold;
    }
    .emotion-btn {
      display: inline-block;
      margin: 0.5rem;
      padding: 0.8rem 1.2rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background-color: #ffd8b1;
      color: #333;
      cursor: pointer;
      transition: background 0.2s;
    }
    .emotion-btn:hover {
      background-color: #ffc69e;
    }
    #message {
      margin-top: 2rem;
      font-size: 1.3rem;
      color: #444;
    }
  </style>
</head>
<body>
  <h1>ìš°ë¬´ì‚¬ë¦¬ ìœ„ì¹˜ ê¸°ë°˜ ê°ì • ìœ„ë¡œ</h1>
  <div id="status">â³ ìœ„ì¹˜ í™•ì¸ ì¤‘ì…ë‹ˆë‹¤...</div>
  <div id="buttons"></div>
  <div id="message"></div>

  <script>
    const statusEl = document.getElementById("status");
    const buttonsEl = document.getElementById("buttons");
    const messageEl = document.getElementById("message");

    let savedLocation = ""; // ìœ„ì¹˜ ì €ì¥ìš©

    const comfortingMessages = {
      "í–‰ë³µ": {
        "ì„œìš¸íŠ¹ë³„ì‹œ": "ì„œìš¸ì˜ í–‡ì‚´ë§Œí¼ ë‹¹ì‹ ì˜ ê¸°ë¶„ë„ ë¹›ë‚˜ê³  ìˆì–´ìš” ğŸŒ",
        "ë¶€ì‚°ê´‘ì—­ì‹œ": "ë¶€ì‚°ì˜ ë°”ë‹¤ì²˜ëŸ¼ ë“œë„“ì€ í–‰ë³µì´ ê°€ë“í•˜ê¸¸ ğŸ’™",
        "default": "ì§€ê¸ˆ ì´ ìˆœê°„ì˜ í–‰ë³µì„ ê¼­ ê¾¹ ëˆŒëŸ¬ì„œ ê¸°ì–µí•´ìš” ğŸˆ"
      },
      "ìŠ¬í””": {
        "ì„œìš¸íŠ¹ë³„ì‹œ": "ì„œìš¸ì˜ ë°”ìœ ê¸¸ ìœ„ì—ë„, ë‹¹ì‹ ì„ ìœ„í•œ ì‰¼í‘œëŠ” í•„ìš”í•´ìš” ğŸ•Šï¸",
        "ë¶€ì‚°ê´‘ì—­ì‹œ": "ë¶€ì‚°ì˜ íŒŒë„ì²˜ëŸ¼ ìŠ¬í””ë„ ì§€ë‚˜ê°ˆ ê±°ì˜ˆìš” ğŸŒŠ",
        "default": "ì§€ê¸ˆ ëŠë¼ëŠ” ìŠ¬í””ì€, ì–¸ì  ê°€ ë‹¹ì‹ ì„ ë” ë”°ëœ»í•˜ê²Œ ë§Œë“¤ ê±°ì˜ˆìš” ğŸ’§"
      },
      "ë¶ˆì•ˆ": {
        "ì„œìš¸íŠ¹ë³„ì‹œ": "ì„œìš¸ì˜ ë¶ˆë¹› ì†ì—ì„œë„ ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ê´œì°®ì•„ìš” ğŸŒƒ",
        "ë¶€ì‚°ê´‘ì—­ì‹œ": "ë¶€ì‚°ì²˜ëŸ¼ ëœ¨ê±°ìš´ ë§ˆìŒì¼ìˆ˜ë¡ í”ë“¤ë¦¬ê¸° ì‰¬ì›Œìš”, ê´œì°®ì•„ìš” ğŸ¤",
        "default": "ë¶ˆì•ˆì€ ë³€í™”ì˜ ì‹ í˜¸ì¼ì§€ë„ ëª°ë¼ìš”. ì²œì²œíˆ, í•œ ê±¸ìŒì”© ğŸ¢"
      },
      "í™”ë‚¨": {
        "ì„œìš¸íŠ¹ë³„ì‹œ": "í™”ë‚œ ë‹¹ì‹ ë„ ì†Œì¤‘í•´ìš”. ê°ì •ì€ ë‚˜ìœ ê²Œ ì•„ë‹ˆì—ìš” ğŸ”¥",
        "ë¶€ì‚°ê´‘ì—­ì‹œ": "ë¶€ì‚°ì˜ ë°”ëŒì²˜ëŸ¼ í›… í•˜ê³  í„¸ì–´ë²„ë ¤ìš” ğŸ’¨",
        "default": "í™”ëŠ” ë‚˜ë¥¼ ì§€í‚¤ë ¤ëŠ” ë§ˆìŒì˜ í‘œí˜„ì´ê¸°ë„ í•´ìš”. ì ê¹ë§Œ ì‰¬ì–´ê°€ìš” ğŸ§˜"
      },
      "ì§€ì¹¨": {
        "ì„œìš¸íŠ¹ë³„ì‹œ": "ì„œìš¸ì˜ ì†ë„ì— ì§€ì³¤ë‹¤ë©´, ì˜¤ëŠ˜ì€ í•œ í…œí¬ ëŠ¦ì¶°ë„ ê´œì°®ì•„ìš” â³",
        "ë¶€ì‚°ê´‘ì—­ì‹œ": "íŒŒë„ë„ ë°€ë ¤ì™€ì•¼ ë‹¤ì‹œ ë‚˜ê°€ìš”. ì‰¬ì–´ë„ ê´œì°®ì•„ìš” ğŸš",
        "default": "ì§€ì¹  ë• ì•„ë¬´ ê²ƒë„ í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„ìš”. ê·¸ ìì²´ë¡œ ì¶©ë¶„í•´ìš” ğŸŒ±"
      }
    };

    function showEmotionButtons() {
      const emotions = ["í–‰ë³µ", "ìŠ¬í””", "ë¶ˆì•ˆ", "í™”ë‚¨", "ì§€ì¹¨"];
      buttonsEl.innerHTML = "";
      emotions.forEach(emotion => {
        const btn = document.createElement("button");
        btn.className = "emotion-btn";
        btn.innerText = emotion;
        btn.addEventListener("click", () => {
          const msgSet = comfortingMessages[emotion];
          const message = msgSet[savedLocation] || msgSet["default"];
          messageEl.innerText = `ğŸ§¡ ${message}`;
        });
        buttonsEl.appendChild(btn);
      });
    }

    function getLocation() {
      navigator.geolocation.getCurrentPosition(async function(position) {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;

        try {
          const res = await fetch(`https://corsproxy.io/?${encodeURIComponent(
  `https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`
)}`);
const data = await res.json();
const region = data.address.state || "default";

          savedLocation = region;
          statusEl.innerText = `ğŸ“ ìœ„ì¹˜ í™•ì¸ ì™„ë£Œ: ${region}`;
          showEmotionButtons();
        } catch {
          savedLocation = "default";
          statusEl.innerText = "âš ï¸ ì£¼ì†Œ ë³€í™˜ ì‹¤íŒ¨. ê¸°ë³¸ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.";
          showEmotionButtons();
        }
      }, function(error) {
        savedLocation = "default";
        statusEl.innerText = "ğŸ™… ìœ„ì¹˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ì–´ìš”. ê¸°ë³¸ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.";
        showEmotionButtons();
      });
    }

    function init() {
      if (navigator.geolocation) {
        getLocation();
      } else {
        statusEl.innerText = "âŒ ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.";
      }
    }

    init();
  </script>
</body>
</html>
